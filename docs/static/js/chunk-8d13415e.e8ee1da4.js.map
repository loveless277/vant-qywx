{"version":3,"sources":["webpack:///./src/components/FixTable/index.vue?f95f","webpack:///src/components/FixTable/index.vue","webpack:///./src/components/FixTable/index.vue?f01a","webpack:///./src/components/FixTable/index.vue","webpack:///./src/modules/frame/view/check/taskDetail.vue?a272","webpack:///src/modules/frame/view/check/taskDetail.vue","webpack:///./src/modules/frame/view/check/taskDetail.vue?2bb7","webpack:///./src/modules/frame/view/check/taskDetail.vue","webpack:///./src/utils/mockReq.js","webpack:///./src/api/table.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","isfixed","staticStyle","attrs","tableData","_t","staticRenderFns","name","props","type","Array","required","height","String","data","mounted","window","addEventListener","onScroll","methods","scrollY","component","staticClass","on","onRefresh","model","value","callback","$$v","isLoading","expression","ref","finished","onLoad","listloading","taskDetailData","scopedSlots","_u","key","fn","scope","_v","_s","row","cityname","house","floor","sn","slot","_f","serverstatus","initQuery","page","limit","components","FixTable","filters","statusFilter","statusMap","status","statusColorFilter","listQuery","created","getlist","mockService","axios","create","baseURL","process","VUE_APP_BASE_API","timeout","interceptors","request","use","config","error","console","log","Promise","reject","response","res","code","Toast","message","duration","Dialog","confirm","confirmButtonText","cancelButtonText","then","location","reload","Error","getList","query","url","method","params","getDevice","getCabinet","getLog"],"mappings":"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","file":"static/js/chunk-8d13415e.e8ee1da4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-table',{class:{'tb-fixed':_vm.isfixed},staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-table\r\n    :data=\"tableData\"\r\n    :class=\"{'tb-fixed':isfixed}\"\r\n    style=\"width: 100%\">\r\n    <!-- :size=\"size\" -->\r\n    <slot/>\r\n  </el-table>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'FixTable',\r\n  props: {\r\n    tableData: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    height: {\r\n      type: String,\r\n      required: true\r\n    }\r\n    // size: {\r\n    //   type: String,\r\n    //   default: 'small'\r\n    // }\r\n  },\r\n  data() {\r\n    return {\r\n      isfixed: false\r\n    }\r\n  },\r\n  mounted() {\r\n    window.addEventListener('scroll', this.onScroll)\r\n  },\r\n  methods: {\r\n    onScroll() {\r\n      if (window.scrollY >= this.height) {\r\n        this.isfixed = true\r\n      } else {\r\n        this.isfixed = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2172ed4e&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"task-detail\"},[_c('nav-bar',{attrs:{\"title-name\":\"盘点设备信息\",\"back-path\":\"/myTask\"}}),_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('van-list',{ref:\"list\",attrs:{\"finished\":_vm.finished,\"immediate-check\":false,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.listloading),callback:function ($$v) {_vm.listloading=$$v},expression:\"listloading\"}},[_c('fix-table',{attrs:{\"table-data\":_vm.taskDetailData,\"height\":'50'}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(_vm._s(scope.row.cityname)+\" / \"+_vm._s(scope.row.house)+\" / \"+_vm._s(scope.row.floor)+\"F\")]),_c('div',{staticStyle:{\"color\":\"#6F5CC2\"}},[_vm._v(_vm._s(scope.row.sn))])]}}])},[_c('template',{slot:\"header\"},[_c('span',[_vm._v(\"机房\")]),_c('br'),_c('span',{staticStyle:{\"color\":\"#6F5CC2\"}},[_vm._v(\"设备编码\")])])],2),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"position\",\"label\":\"机柜\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"rackid\",\"label\":\"机架号\",\"width\":\"60\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"状态\",\"width\":\"60\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('van-icon',{attrs:{\"name\":_vm._f(\"statusFilter\")(scope.row.serverstatus),\"color\":_vm._f(\"statusColorFilter\")(scope.row.serverstatus),\"size\":\"20\"}})]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"task-detail\">\r\n    <nav-bar title-name=\"盘点设备信息\" back-path=\"/myTask\"/>\r\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\r\n      <van-list\r\n        ref=\"list\"\r\n        v-model=\"listloading\"\r\n        :finished=\"finished\"\r\n        :immediate-check=\"false\"\r\n        finished-text=\"没有更多了\"\r\n        @load=\"onLoad\"\r\n      >\r\n        <fix-table :table-data=\"taskDetailData\" :height=\"'50'\">\r\n          <el-table-column\r\n            align=\"center\"\r\n            width=\"120\">\r\n            <template slot=\"header\">\r\n              <span>机房</span><br>\r\n              <span style=\"color:#6F5CC2;\">设备编码</span>\r\n            </template>\r\n            <template slot-scope=\"scope\">\r\n              <div>{{ scope.row.cityname }} / {{ scope.row.house }} / {{ scope.row.floor }}F</div>\r\n              <div style=\"color:#6F5CC2;\">{{ scope.row.sn }}</div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            align=\"center\"\r\n            prop=\"position\"\r\n            label=\"机柜\"/>\r\n\r\n          <el-table-column\r\n            align=\"center\"\r\n            prop=\"rackid\"\r\n            label=\"机架号\"\r\n            width=\"60\"/>\r\n          <el-table-column\r\n            align=\"center\"\r\n            label=\"状态\"\r\n            width=\"60\">\r\n            <template slot-scope=\"scope\">\r\n              <van-icon :name=\"scope.row.serverstatus | statusFilter\" :color=\"scope.row.serverstatus | statusColorFilter\" size=\"20\"/>\r\n            </template>\r\n          </el-table-column>\r\n        </fix-table>\r\n      </van-list>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FixTable from '@/components/FixTable'\r\nimport { getDevice } from '@/api/table'\r\n\r\nvar initQuery = {\r\n  page: 1,\r\n  limit: 10\r\n}\r\n\r\nexport default {\r\n  components: {\r\n    FixTable\r\n  },\r\n  filters: {\r\n    statusFilter(status) {\r\n      const statusMap = {\r\n        '2': 'passed',\r\n        '1': 'close'\r\n      }\r\n      return statusMap[status]\r\n    },\r\n    statusColorFilter(status) {\r\n      const statusMap = {\r\n        '2': '#60D87C',\r\n        '1': '#ffa39e'\r\n      }\r\n      return statusMap[status]\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      taskDetailData: [],\r\n      isLoading: false,\r\n      listloading: false,\r\n      finished: false,\r\n      listQuery: {\r\n        page: 1,\r\n        limit: 10\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getlist()\r\n  },\r\n  methods: {\r\n    getlist() {\r\n      getDevice(initQuery).then(res => {\r\n        this.taskDetailData = res.data.items\r\n        this.listQuery.page++\r\n      })\r\n    },\r\n    async onLoad() {\r\n      await getDevice(this.listQuery).then(res => {\r\n        var result = this.taskDetailData.concat(res.data.items)\r\n        this.taskDetailData = result\r\n        this.listloading = false\r\n        if (res.data.items.length !== 0) {\r\n          this.listQuery.page++\r\n        } else {\r\n          this.finished = true\r\n        }\r\n      })\r\n    },\r\n    onRefresh() {\r\n      getDevice(initQuery).then((res) => {\r\n        this.$toast('刷新成功')\r\n        this.isLoading = false\r\n        this.taskDetailData = res.data.items\r\n        this.listQuery.page = 1\r\n        this.listQuery.page++\r\n        this.finished = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taskDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taskDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./taskDetail.vue?vue&type=template&id=38100535&\"\nimport script from \"./taskDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./taskDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\r\nimport { Toast, Dialog } from 'vant'\r\n\r\n// create an axios instance\r\nconst mockService = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\r\n  // withCredentials: true, // send cookies when cross-domain requests\r\n  timeout: 5000 // request timeout\r\n})\r\n\r\n// request interceptor\r\nmockService.interceptors.request.use(\r\n  config => {\r\n    // do something before request is sent\r\n\r\n    // if (store.getters.token) {\r\n    //   // let each request carry token\r\n    //   // ['X-Token'] is a custom headers key\r\n    //   // please modify it according to the actual situation\r\n    //   config.headers['X-Token'] = getToken()\r\n    // }\r\n    return config\r\n  },\r\n  error => {\r\n    // do something with request error\r\n    console.log(error) // for debug\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// response interceptor\r\nmockService.interceptors.response.use(\r\n  /**\r\n   * If you want to get http information such as headers or status\r\n   * Please return  response => response\r\n  */\r\n\r\n  /**\r\n   * Determine the request status by custom code\r\n   * Here is just an example\r\n   * You can also judge the status by HTTP Status Code\r\n   */\r\n  response => {\r\n    const res = response.data\r\n\r\n    // if the custom code is not 20000, it is judged as an error.\r\n    if (res.code !== 20000) {\r\n      Toast({\r\n        message: res.message || 'Error',\r\n        type: 'fail',\r\n        duration: 5 * 1000\r\n      })\r\n\r\n      // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\r\n      if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\r\n        // to re-login\r\n        Dialog.confirm('You have been logged out, you can cancel to stay on this page, or log in again', 'Confirm logout', {\r\n          confirmButtonText: 'Re-Login',\r\n          cancelButtonText: 'Cancel',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          location.reload()\r\n        })\r\n      }\r\n      return Promise.reject(new Error(res.message || 'Error'))\r\n    } else {\r\n      return res\r\n    }\r\n  },\r\n  error => {\r\n    console.log('err' + error) // for debug\r\n    Toast({\r\n      message: error.message,\r\n      type: 'error',\r\n      duration: 5 * 1000\r\n    })\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default mockService\r\n","import request from '@/utils/mockReq'\r\n\r\nexport function getList(query) {\r\n  return request({\r\n    url: '/table/list',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\nexport function getDevice(query) {\r\n  return request({\r\n    url: '/table/device',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\nexport function getCabinet(query) {\r\n  return request({\r\n    url: '/table/cabinet',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\nexport function getLog(query) {\r\n  return request({\r\n    url: '/table/log',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n"],"sourceRoot":""}